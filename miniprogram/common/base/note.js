"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var isEmpty_1 = require("../../utils/isEmpty");
var Note = (function () {
    function Note() {
        this.data = {};
    }
    Note.prototype.get = function (scope) {
        var _this = this;
        if (scope)
            return this.data[scope] ? this.data[scope].value : undefined;
        var res = {};
        Object.keys(this.data).map(function (key) {
            res[key] = _this.data[key].value;
        });
    };
    Note.prototype.emit = function (scope, value) {
        var self = this;
        return new Promise(function (resolve, reject) {
            try {
                if (!self.data[scope])
                    self.data[scope] = { value: value, watch: {} };
                else {
                    var page_1 = getCurrentPages().pop();
                    Object.keys(self.data[scope].watch[page_1.__wxWebviewId__]).forEach(function (nodeId) {
                        self.data[scope].watch[page_1.__wxWebviewId__][nodeId].forEach(function (fn) {
                            fn(value, self.data[scope].value);
                            self.data[scope].value = value;
                        });
                    });
                }
                resolve(self.data[scope].value, value);
            }
            catch (error) {
                reject(error);
            }
        });
    };
    Note.prototype.on = function (scope, fn, ctx) {
        var _this = this;
        var type = Object.prototype.toString.call(scope);
        if (type === "[object String]")
            return this._on(scope, fn, ctx);
        if (type === "[object Array]") {
            return scope.map(function (sc) { return _this._on(sc, fn, ctx); });
        }
    };
    Note.prototype.off = function (scope, ctx) {
        var _this = this;
        var type = Object.prototype.toString.call(scope);
        if (type === "[object String]")
            this._off(scope, ctx);
        if (type === "[object Array]") {
            scope.map(function (sc) { return _this._off(sc, ctx); });
        }
    };
    Note.prototype._on = function (scope, fn, ctx) {
        if (!this.data[scope])
            this.data[scope] = { value: null, watch: {} };
        if (!this.data[scope].watch[ctx.__wxWebviewId__])
            this.data[scope].watch[ctx.__wxWebviewId__] = {};
        if (!this.data[scope].watch[ctx.__wxWebviewId__][ctx.__wxExparserNodeId__])
            this.data[scope].watch[ctx.__wxWebviewId__][ctx.__wxExparserNodeId__] = [];
        this.data[scope].watch[ctx.__wxWebviewId__][ctx.__wxExparserNodeId__].push(fn.bind(ctx));
        return this.data[scope].value;
    };
    Note.prototype._off = function (scope, ctx) {
        try {
            delete this.data[scope].watch[ctx.__wxWebviewId__][ctx.__wxExparserNodeId__];
            if (isEmpty_1.isEmpty(this.data[scope].watch))
                delete this.data[scope].watch;
            if (isEmpty_1.isEmpty(this.data[scope].watch[ctx.__wxWebviewId__]))
                delete this.data[scope].watch[ctx.__wxWebviewId__];
        }
        catch (err) { }
    };
    return Note;
}());
exports.default = new Note();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm5vdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQ0FBOEM7QUFjOUM7SUFFRTtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFLRCxrQkFBRyxHQUFILFVBQUksS0FBYztRQUFsQixpQkFNQztRQUxDLElBQUksS0FBSztZQUFFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUN4RSxJQUFJLEdBQUcsR0FBUSxFQUFFLENBQUM7UUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUEsR0FBRztZQUM1QixHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBT0QsbUJBQUksR0FBSixVQUFLLEtBQWEsRUFBRSxLQUFVO1FBQzVCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztRQUNsQixPQUFPLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBWSxFQUFFLE1BQVc7WUFDM0MsSUFBSTtnQkFFRixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEtBQUssT0FBQSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQztxQkFDMUQ7b0JBQ0gsSUFBTSxNQUFJLEdBQVEsZUFBZSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7b0JBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUMvRCxVQUFBLE1BQU07d0JBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FDMUQsVUFBQSxFQUFFOzRCQUNBLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQzs0QkFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO3dCQUNqQyxDQUFDLENBQ0YsQ0FBQztvQkFDSixDQUFDLENBQ0YsQ0FBQztpQkFDSDtnQkFFRCxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDeEM7WUFBQyxPQUFPLEtBQUssRUFBRTtnQkFDZCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDZjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQVFELGlCQUFFLEdBQUYsVUFDRSxLQUEwQixFQUMxQixFQUFPLEVBQ1AsR0FBb0M7UUFIdEMsaUJBVUM7UUFMQyxJQUFNLElBQUksR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsSUFBSSxJQUFJLEtBQUssaUJBQWlCO1lBQUUsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQWUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDMUUsSUFBSSxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7WUFDN0IsT0FBUSxLQUFrQixDQUFDLEdBQUcsQ0FBQyxVQUFDLEVBQVUsSUFBSyxPQUFBLEtBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBckIsQ0FBcUIsQ0FBQyxDQUFDO1NBQ3ZFO0lBQ0gsQ0FBQztJQU1ELGtCQUFHLEdBQUgsVUFBSSxLQUF3QixFQUFFLEdBQW9DO1FBQWxFLGlCQU1DO1FBTEMsSUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25ELElBQUksSUFBSSxLQUFLLGlCQUFpQjtZQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ2hFLElBQUksSUFBSSxLQUFLLGdCQUFnQixFQUFFO1lBQzVCLEtBQWtCLENBQUMsR0FBRyxDQUFDLFVBQUMsRUFBVSxJQUFLLE9BQUEsS0FBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQWxCLENBQWtCLENBQUMsQ0FBQztTQUM3RDtJQUNILENBQUM7SUFFRCxrQkFBRyxHQUFILFVBQUksS0FBYSxFQUFFLEVBQU0sRUFBRSxHQUFvQztRQUM3RCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDckUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUM7WUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztZQUN4RSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQ3pDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FDekIsR0FBRyxFQUFFLENBQUM7UUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUN4RSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUNiLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxtQkFBSSxHQUFKLFVBQUssS0FBYSxFQUFFLEdBQW9DO1FBQ3RELElBQUk7WUFDRixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FDaEQsR0FBRyxDQUFDLG9CQUFvQixDQUN6QixDQUFDO1lBQ0YsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUFFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDbkUsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQztnQkFDdEQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDdEQ7UUFBQyxPQUFPLEdBQUcsRUFBRSxHQUFFO0lBQ2xCLENBQUM7SUFDSCxXQUFDO0FBQUQsQ0FBQyxBQXZHRCxJQXVHQztBQUVELGtCQUFlLElBQUksSUFBSSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSBcIi4uLy4uL3V0aWxzL2lzRW1wdHlcIjtcblxudHlwZSBGbiA9ICguLi5hcmdzOiBhbnkpID0+IGFueTtcbmludGVyZmFjZSBOb3RlRGF0YSB7XG4gIFtzY29wZU5hbWU6IHN0cmluZ106IHtcbiAgICB2YWx1ZTogYW55O1xuICAgIHdhdGNoOiB7XG4gICAgICBbd2ViaWQ6IHN0cmluZ106IHtcbiAgICAgICAgW25vZGVpZDogc3RyaW5nXTogKG5ldmVyIHwgRm4pW107XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbmNsYXNzIE5vdGUge1xuICBkYXRhOiBOb3RlRGF0YTsgLy8g5pWw5o2u5a2Y5pS+XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGF0YSA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiDojrflj5bmlbDmja5cbiAgICogQHBhcmFtIHNjb3BlIOiOt+WPluaMh+WumnNjb3Bl55qEdmFsdWXvvIzkuI3kvKDml7bov5Tlm57miYDmnInmlbDmja5cbiAgICovXG4gIGdldChzY29wZT86IHN0cmluZykge1xuICAgIGlmIChzY29wZSkgcmV0dXJuIHRoaXMuZGF0YVtzY29wZV0gPyB0aGlzLmRhdGFbc2NvcGVdLnZhbHVlIDogdW5kZWZpbmVkO1xuICAgIGxldCByZXM6IGFueSA9IHt9O1xuICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkubWFwKGtleSA9PiB7XG4gICAgICByZXNba2V5XSA9IHRoaXMuZGF0YVtrZXldLnZhbHVlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOS/ruaUueaVsOaNru+8jOS8muinpuWPkee7keWumueahOaWueazlVxuICAgKiBAcGFyYW0gc2NvcGUg5L+u5pS555qE6IqC54K5XG4gICAqIEBwYXJhbSB2YWx1ZSDkv67mlLnnmoTmlbDmja5cbiAgICovXG4gIGVtaXQoc2NvcGU6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g5pWw5o2u5Lit6IqC54K55LiN5a2Y5ZyoXG4gICAgICAgIGlmICghc2VsZi5kYXRhW3Njb3BlXSkgc2VsZi5kYXRhW3Njb3BlXSA9IHsgdmFsdWUsIHdhdGNoOiB7fSB9O1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBwYWdlOiBhbnkgPSBnZXRDdXJyZW50UGFnZXMoKS5wb3AoKTtcbiAgICAgICAgICBPYmplY3Qua2V5cyhzZWxmLmRhdGFbc2NvcGVdLndhdGNoW3BhZ2UuX193eFdlYnZpZXdJZF9fXSkuZm9yRWFjaChcbiAgICAgICAgICAgIG5vZGVJZCA9PiB7XG4gICAgICAgICAgICAgIHNlbGYuZGF0YVtzY29wZV0ud2F0Y2hbcGFnZS5fX3d4V2Vidmlld0lkX19dW25vZGVJZF0uZm9yRWFjaChcbiAgICAgICAgICAgICAgICBmbiA9PiB7XG4gICAgICAgICAgICAgICAgICBmbih2YWx1ZSwgc2VsZi5kYXRhW3Njb3BlXS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBzZWxmLmRhdGFbc2NvcGVdLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHNlbGYuZGF0YVtzY29wZV0udmFsdWUsIHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog57uR5a6a55uR5ZCs5pWw5o2u5Y+Y5YyWXG4gICAqIEBwYXJhbSBzY29wZSDnm5HlkKznmoToioLngrlcbiAgICogQHBhcmFtIGZuIOebkeWQrOeahOWHveaVsFxuICAgKiBAcGFyYW0gY3R4IOW9k+WJjemhtemdouaIluiAheiHquWumuS5iee7hOS7tueahHRoaXNcbiAgICovXG4gIG9uKFxuICAgIHNjb3BlOiBzdHJpbmcgfCAoc3RyaW5nW10pLFxuICAgIGZuOiBhbnksXG4gICAgY3R4OiBXeENvbXBvbmVudCB8IFBhZ2UuUGFnZUluc3RhbmNlXG4gICk6IGFueSB7XG4gICAgY29uc3QgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzY29wZSk7XG4gICAgaWYgKHR5cGUgPT09IFwiW29iamVjdCBTdHJpbmddXCIpIHJldHVybiB0aGlzLl9vbihzY29wZSBhcyBzdHJpbmcsIGZuLCBjdHgpO1xuICAgIGlmICh0eXBlID09PSBcIltvYmplY3QgQXJyYXldXCIpIHtcbiAgICAgIHJldHVybiAoc2NvcGUgYXMgc3RyaW5nW10pLm1hcCgoc2M6IHN0cmluZykgPT4gdGhpcy5fb24oc2MsIGZuLCBjdHgpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIOWPlua2iOe7keWumuebkeWQrFxuICAgKiBAcGFyYW0gc2NvcGUg5Y+W5raI57uR5a6a55qE6IqC54K5XG4gICAqIEBwYXJhbSBjdHggIOW9k+WJjemhtemdouaIluiAheiHquWumuS5iee7hOS7tueahHRoaXNcbiAgICovXG4gIG9mZihzY29wZTogc3RyaW5nIHwgc3RyaW5nW10sIGN0eDogV3hDb21wb25lbnQgfCBQYWdlLlBhZ2VJbnN0YW5jZSk6IHZvaWQge1xuICAgIGNvbnN0IHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2NvcGUpO1xuICAgIGlmICh0eXBlID09PSBcIltvYmplY3QgU3RyaW5nXVwiKSB0aGlzLl9vZmYoc2NvcGUgYXMgc3RyaW5nLCBjdHgpO1xuICAgIGlmICh0eXBlID09PSBcIltvYmplY3QgQXJyYXldXCIpIHtcbiAgICAgIChzY29wZSBhcyBzdHJpbmdbXSkubWFwKChzYzogc3RyaW5nKSA9PiB0aGlzLl9vZmYoc2MsIGN0eCkpO1xuICAgIH1cbiAgfVxuXG4gIF9vbihzY29wZTogc3RyaW5nLCBmbjogRm4sIGN0eDogV3hDb21wb25lbnQgfCBQYWdlLlBhZ2VJbnN0YW5jZSk6IGFueSB7XG4gICAgaWYgKCF0aGlzLmRhdGFbc2NvcGVdKSB0aGlzLmRhdGFbc2NvcGVdID0geyB2YWx1ZTogbnVsbCwgd2F0Y2g6IHt9IH07XG4gICAgaWYgKCF0aGlzLmRhdGFbc2NvcGVdLndhdGNoW2N0eC5fX3d4V2Vidmlld0lkX19dKVxuICAgICAgdGhpcy5kYXRhW3Njb3BlXS53YXRjaFtjdHguX193eFdlYnZpZXdJZF9fXSA9IHt9O1xuICAgIGlmICghdGhpcy5kYXRhW3Njb3BlXS53YXRjaFtjdHguX193eFdlYnZpZXdJZF9fXVtjdHguX193eEV4cGFyc2VyTm9kZUlkX19dKVxuICAgICAgdGhpcy5kYXRhW3Njb3BlXS53YXRjaFtjdHguX193eFdlYnZpZXdJZF9fXVtcbiAgICAgICAgY3R4Ll9fd3hFeHBhcnNlck5vZGVJZF9fXG4gICAgICBdID0gW107XG4gICAgdGhpcy5kYXRhW3Njb3BlXS53YXRjaFtjdHguX193eFdlYnZpZXdJZF9fXVtjdHguX193eEV4cGFyc2VyTm9kZUlkX19dLnB1c2goXG4gICAgICBmbi5iaW5kKGN0eClcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmRhdGFbc2NvcGVdLnZhbHVlO1xuICB9XG5cbiAgX29mZihzY29wZTogc3RyaW5nLCBjdHg6IFd4Q29tcG9uZW50IHwgUGFnZS5QYWdlSW5zdGFuY2UpIHtcbiAgICB0cnkge1xuICAgICAgZGVsZXRlIHRoaXMuZGF0YVtzY29wZV0ud2F0Y2hbY3R4Ll9fd3hXZWJ2aWV3SWRfX11bXG4gICAgICAgIGN0eC5fX3d4RXhwYXJzZXJOb2RlSWRfX1xuICAgICAgXTtcbiAgICAgIGlmIChpc0VtcHR5KHRoaXMuZGF0YVtzY29wZV0ud2F0Y2gpKSBkZWxldGUgdGhpcy5kYXRhW3Njb3BlXS53YXRjaDtcbiAgICAgIGlmIChpc0VtcHR5KHRoaXMuZGF0YVtzY29wZV0ud2F0Y2hbY3R4Ll9fd3hXZWJ2aWV3SWRfX10pKVxuICAgICAgICBkZWxldGUgdGhpcy5kYXRhW3Njb3BlXS53YXRjaFtjdHguX193eFdlYnZpZXdJZF9fXTtcbiAgICB9IGNhdGNoIChlcnIpIHt9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IE5vdGUoKTtcbiJdfQ==